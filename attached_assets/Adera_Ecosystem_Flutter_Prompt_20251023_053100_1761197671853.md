# DreamFlow AI IDE Prompt ‚Äî Adera Ecosystem (Flutter Version)

**Project Name:** Adera Ecosystem  
**Scope:** Unified hybrid app ecosystem combining logistics (Adera-PTP) and e-commerce (Adera-Shops) with a shared backend, single sign-on, multilingual support, and fully role-based navigation.  
**Target Region:** Addis Ababa, Ethiopia ‚Äî optimized for low-bandwidth infrastructure, offline resilience, and local payment gateways.

---

## üß≠ Objective
Develop a **cross-platform mobile app (Flutter)** implementing both **Adera-PTP (parcel delivery)** and **Adera-Shops (marketplace)** under a unified authentication and backend (Supabase). The app should support five primary user roles: **Customer, Partner, Driver, Personnel, and Admin**, plus a **Guest mode**.

Each role experiences a distinct dashboard, workflows, and UI components while sharing the same design language and data sync.

---

## üë• Roles and Functional Scopes

### 1. Customer (Sender/Recipient)
**Key capabilities:**
- Register/login once for both PTP and Shops.
- Create delivery orders; define pickup/drop-off partners using map view.
- Real-time parcel tracking (OpenStreetMap).
- Upload parcel photos (max 3) for verification.
- Choose payment option (Telebirr, Chapa, ArifPay, Wallet, COD).
- In-app chat with Driver/Support.
- Rate deliveries and submit complaints with photo evidence.
- Shop browsing, wishlist, checkout, review, and rating.
- Auto-create delivery task when purchasing from Adera-Shops (recipient may trigger delivery).

### 2. Partner (Pickup/Drop-off Point or Vendor)
**Key capabilities:**
- Register as business and complete verification.
- Manage inventory and orders (CRUD for items, images, prices, categories, bank/TeleBirr accounts).
- Serve as pickup/drop-off hub for parcels.
- QR scanning (single & bulk) for receive/store/release.
- Auto-integration with logistics for orders from their shops.
- View earnings, payout logs, sales analytics.
- Manage local promotions and flash sales.
- Access performance dashboard (orders, traffic, conversions, ratings).

### 3. Driver / Courier
**Key capabilities:**
- Accept assigned parcels; optimized delivery routes.
- Scan QR codes for each stage (accept, sort, deliver) ‚Äî single & bulk modes.
- Real-time GPS tracking visible to sender/recipient.
- Record delivery proof (photo + timestamp).
- Chat with customers & support.
- Fuel/expense tracking.
- Weekly performance summary & badges.

### 4. Personnel (Sorting Facility Staff)
**Key capabilities:**
- Scan & verify parcels at sorting centers.
- Assign drivers for outgoing shipments.
- Update parcel statuses.
- Report irregularities (with photos & notes).
- Manage issue logs and exceptions.

### 5. Admin
**Key capabilities:**
- Unified dashboard (global KPIs: delivery volume, payments, disputes, ratings).
- Manage users, roles, partners.
- Approve onboarding requests.
- Moderate support chats & disputes.
- Reconcile payments.
- Configure app settings & announcements.
- Access parcel event logs and override statuses.

### 6. Guest
**Key capabilities:**
- Browse Adera-Shops marketplace.
- View nearby partner locations on a map.
- Limited view-only mode for both modules.

---

## üîß Tech Stack (Flutter-First)

| Layer | Technology | Purpose |
|-------|-------------|----------|
| **Frontend** | Flutter + Dart | Unified cross-platform UI |
| **State Management** | Riverpod / Bloc | Scalable state control |
| **Backend** | Supabase (free tier) | Auth, DB, Storage, Realtime, Policies |
| **Database** | PostgreSQL (via Supabase) | Central data layer |
| **Offline Cache** | Hive or Drift (SQLite) | Offline persistence |
| **Maps & Routing** | OpenStreetMap + flutter_map | Mapping & route optimization |
| **Notifications** | Firebase Cloud Messaging + Supabase Realtime | Push & in-app notifications |
| **Payments** | TeleBirr, Chapa, ArifPay API integrations | Local payments |
| **Chat** | Supabase channels / Stream Chat (free tier) | Real-time communication |
| **QR / Barcode** | mobile_scanner / qr_code_scanner | Scanning for parcel workflows |
| **Media & Uploads** | image_picker + camera + Supabase Storage | Image uploads & verification |
| **Analytics** | fl_chart + custom dashboards | Visual analytics for Admin/Partners |
| **Localization** | flutter_localizations + intl | Multilingual UI (English & Amharic) |

---

## üß© Core Functional Modules

### 1. Unified Authentication & Role Routing
- Single Supabase auth (email/password or magic link).
- Post-login role detection ‚Üí navigates to corresponding dashboard.
- Guest mode with restricted read-only APIs.

### 2. Adera-PTP (Parcel Delivery)
- Create parcel (sender flow with validation & payment).
- Auto-generate QR & tracking ID (HMAC-SHA256 hash).
- Sequential QR scanning at each stage (pickup ‚Üí hub ‚Üí delivery).
- Real-time status tracking & event logs.
- Dynamic pricing (distance, weight, urgency).
- Driver navigation view (route optimization).
- Dispute flow with photo evidence & chat.

### 3. Adera-Shops (E-Commerce)
- Marketplace browsing (category filters, partner listings).
- Product detail with transparent commission info.
- Checkout flow with integrated Adera-PTP delivery creation.
- Partner dashboard for sales, orders, inventory.
- Review & rating system.

### 4. In-App Wallet & Payments
- Add funds via TeleBirr / Chapa / ArifPay.
- View transaction history.
- Support COD and commission logic.

### 5. Repository & Media Management
- Save notes, links, parcel screenshots.
- Search, filter, and sort functionality.
- Sync across devices via Supabase storage.

### 6. Analytics & Reports
- Admin: sales trends, partner stats, delivery heatmaps.
- Partner: shop conversions, earnings, reviews.
- Driver: delivery count, distance, fuel costs.
- Customer: delivery history summary.

### 7. Communication Layer
- In-app real-time chat (customer ‚Üî driver ‚Üî support).
- Optional voice message feature.
- Support channel for dispute resolution.

### 8. Localization & Accessibility
- English + Amharic translations.
- RTL support where applicable.
- Font scaling and adaptive layouts.

---

## üîê Security & Data Integrity
- Role-based access control (RBAC) enforced via Supabase RLS policies.
- Each QR scan logged with timestamp, location, and actor.
- Biometric verification for sensitive actions.
- Encrypted media uploads.

---

## üß± Database Overview (Supabase)
```
users(id, name, email, role, phone, language, wallet_balance)
parcels(id, sender_id, recipient_id, status, weight, distance, price, qr_hash, timestamps)
parcel_events(id, parcel_id, actor_id, role, status, location, created_at)
partners(id, name, category, map_location, verified, balance)
shops(id, partner_id, name, description, banner, verified)
items(id, shop_id, name, price, stock, image_url, rating)
orders(id, customer_id, item_id, quantity, total, delivery_id, status)
transactions(id, user_id, amount, method, status, reference, created_at)
notifications(id, user_id, title, body, read)
messages(id, sender_id, receiver_id, text, created_at)
```

---

## üßÆ UI Structure (Major Screens)
- **Onboarding** (login, signup, continue as guest)
- **Home Gateway** ‚Üí Select PTP or Shops
- **Customer Dashboards** (PTP + Shops)
- **Partner Dashboard** (deliveries + shop analytics)
- **Driver Dashboard** (tasks + route map + scan)
- **Personnel Dashboard** (sorting & verification)
- **Admin Console** (global KPIs, analytics)
- **Wallet & Payments**
- **Notifications & Chat**
- **Settings (language, account, privacy)**

---

## üìä Analytics Widgets
- Line chart (delivery volume)
- Pie chart (payment methods usage)
- Heatmap (delivery density)
- Leaderboard (driver performance)
- Bar chart (partner sales over time)

---

## ‚ú® Design System
- Clean, modern, material-you inspired.
- Color palette: warm neutral tones + blue primary.
- Rounded corners, soft shadows.
- Animated transitions via Rive or Lottie.
- Dark/light modes.

---

## ‚úÖ Acceptance Criteria
- App builds and runs on both Android and iOS via `flutter run`.
- All five roles fully navigable post-auth.
- QR scanning, chat, and wallet operational.
- Offline cache functional.
- Localization switch works.
- Basic analytics visible on each dashboard.
- Repository and media uploads persist.
- README includes setup & environment instructions.

---

## üì¶ Deliverables for DreamFlow
1. Full Flutter project structure with code files and assets.
2. Supabase schema SQL & example .env.
3. Dummy data for local testing (sample parcels, items, users).
4. README with installation, architecture notes, and next-phase suggestions.
5. Optional web admin panel (Flutter Web) scaffold.

---

**End of Prompt ‚Äî Adera Ecosystem (Flutter Version)**
